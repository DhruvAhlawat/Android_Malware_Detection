
#Usage -> $1 is the name of the folder inwhich the benign folders containing the static_features.txt is present. $3 (if provided), mentions whether we should overwrite the csv file or append. if not provided then it appends, if provided and equal to 1 then it overwrites and creates a new file.
# $2 contains the name of the folder in which the Malware folders containing the static_features.txt is present. 

if [ $# -eq 3 ] && [ $3 == 1 ] ; 
then
	rm ../../Data/ListFeatures/ManifestFeatures.csv
	rm ../../Data/ListFeatures/ListReceivers.csv
	rm ../../Data/ListFeatures/ListProviders.csv
	rm ../../Data/ListFeatures/ListActivities.csv
	
	rm ../../Data/ListFeatures/ListActions.csv
	rm ../../Data/ListFeatures/ListPermissions.csv
	rm ../../Data/ListFeatures/ListCategories.csv
	rm ../../Data/ListFeatures/ListServices.csv
	
	touch ../../Data/ListFeatures/ListActions.csv
	touch ../../Data/ListFeatures/ListPermissions.csv
	touch ../../Data/ListFeatures/ListCategories.csv
	touch ../../Data/ListFeatures/ListServices.csv
	touch ../../Data/ListFeatures/ManifestFeatures.csv

fi

#first we find all the Unique features contained in the static_features.txt files of the benign and malware folders.
for f in $1/*/*.txt
do
	python3 Create_Unique_Lists.py $f
done

for f in $2/*/*.txt
do
	python3 Create_Unique_Lists.py $f
done

cnt=0; #when cnt is 0, the Headers are also printed. This is useful for the csv files to identify each feature column corresponds to which feature
for f in $1/*/*.txt
do
	#echo $f;
	if [ $cnt == 0 ]; 
	then
	python3 Create_Vector.py $f / 0 True
	else
	#the 0 corresponds to the isMalware flag. 0 for benign and 1 for malware
	python3 Create_Vector.py $f / 0
	fi
	cnt=$((cnt+1))
done

#no need to print headers again for the malware folders. Hence cnt is set to 1. 
for f in $2/*/*.txt
do
	#echo $f;
	python3 Create_Vector.py $f / 1 
done
